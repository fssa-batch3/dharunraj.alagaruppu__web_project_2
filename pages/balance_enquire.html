<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Balance Enquire</title>
    <link rel="stylesheet" href="../assets/css/common_style.css">
    <link rel="stylesheet" href="../assets/css/balance_enquire.css">
</head>

<body>

    <header>
        <div class="title">
            <a href="./home.html">NET BLIZ</a>
        </div>

        <div class="full_link">
            <div>
                <a href="./home.html">Home</a>
            </div>


            <div>
                <a href="./fund_transfer.html">Transfer</a>
            </div>


            <div>
                <a class="current_page" href="#">Balance</a>
            </div>

            <div>
                <a href="./history.html">History</a>
            </div>

            <div class="logout">
                <a href="../index.html">Log Out</a>
            </div>
        </div>

    </header>

    <main>

        <h1 id="balance_name">Bank balance details</h1>

        <div class="bank_list">


        </div>

        <div class="container1">

            <div class="content1">
                <h1> Good to see you !!</h1>
                <img id="tick" src="../assets/img/tick_balance.png" alt="tick">
            </div>


            <div class="account">

                <div class="balance_data">

                    <div class="number_type">

                        <div class="account_number">

                            <span>Account Number :</span>
                            <h2 id="customer_ac"></h2>
                        </div>

                        <div class="account_type">

                            <span>Account Type :</span>
                            <h2 id="ac_type"></h2>
                        </div>

                    </div>

                    <div class="account_balance">

                        <span>Available money :</span>
                        <h1 id="balance"></h1>
                    </div>


                </div>

                <div class="back_button">

                    <a href="./fund_transfer.html">Transfer money</a>
                    <a href="./balance_enquire.html">Back balance enquire</a>
                </div>


            </div>

        </div>
    </main>

    <footer>

        <div class="back_foot">

            <!-- <div class="direct">

                <a href="./signup_page.html">Register</a>
                <a href="./login_page.html">Login</a>
            </div> -->

            <h3>@ 2023 NET BLIZ</h3>



            <div class="icon_social">

                <a href="https://www.linkedin.com/"> <img src="../assets/img/icons8-linkedin-100 (1).png"
                        alt="linked in"></a>
                <a href="https://www.facebook.com/"><img src="../assets/img/icons8-facebook-100.png" alt="facebook"></a>
                <a href="https://www.instagram.com/"><img src="../assets/img/icons8-instagram-100.png" alt="insta"></a>
                <a href="https://twitter.com/"> <img src="../assets/img/icons8-twitter-100.png" alt="teitter"></a>

            </div>


        </div>

    </footer>


</body>

<script>

    let email = localStorage.getItem("email");

    let signup_array = JSON.parse(localStorage.getItem("array"));

    let balance_enquire = JSON.parse(localStorage.getItem("bal_enquire"));

    let account_detail = JSON.parse(localStorage.getItem("account_details"));


    let customer_balance;
    let customer_number;
    let customer_type;


    for (let array = 0; array < signup_array.length; array++) {

        for (let ac = 0; ac < account_detail.length; ac++) {

            if (signup_array[array]["email"] == email && signup_array[array]["email"] == account_detail[ac]["email_compare"]) {



                let welcome = document.createElement("div");
                welcome.setAttribute("class", "bank_no");
                document.querySelector(".bank_list").append(welcome);

                let image = document.createElement("img");
                image.setAttribute("src", "../assets/img/account.png");
                image.setAttribute("alt", "Net Bliz");
                welcome.append(image);

                let bank_no = document.createElement("h4");
                bank_no.setAttribute("class", "account_num")
                bank_no.setAttribute("id", "account");
                bank_no.innerText = account_detail[ac]["account"];
                welcome.append(bank_no);

                let bank_name = document.createElement("h3");
                bank_name.setAttribute("class", "bank_name")
                bank_name.setAttribute("id", "bank_name")
                bank_name.innerText = account_detail[ac]["bank_name"];
                welcome.append(bank_name);


            }
        }
    }


    let user_acc = document.querySelectorAll(".bank_no");
    let account_num = document.querySelectorAll(".account_num");
    let account_name = document.querySelectorAll(".bank_name");

    let ref_num;
    let ref_name;


    for (let p = 0; p < user_acc.length; p++) {

        user_acc[p].addEventListener("click", () => {

            document.querySelector(".container1").style.display = "block";
            
            document.querySelector("#balance_name").style.display = "none"

            document.querySelector(".bank_list").style.display = "none";

            ref_num = account_num[p].innerText;
            
            ref_name = account_name[p].innerText;


            check_balance()
        })

    }



    function check_balance() {

        for (let s = 0; s < signup_array.length; s++) {

            for (let t = 0; t < balance_enquire.length; t++) {

                if (signup_array[s]["email"] == email && ref_num == balance_enquire[t]["ac_no"]) {

                    customer_balance = balance_enquire[t]["ac_balance"];

                    customer_number = balance_enquire[t]["ac_no"];

                    customer_type = balance_enquire[t]["ac_type"];

                    document.getElementById("balance").innerText = customer_balance;
                    document.getElementById("customer_ac").innerHTML = customer_number;
                    document.getElementById("ac_type").innerText = customer_type;

                    localStorage.setItem("bal_enquire", JSON.stringify(balance_enquire));

                }

            }

        }

    }

</script>

</html>