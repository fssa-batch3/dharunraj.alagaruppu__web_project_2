<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>History</title>
    <link rel="stylesheet" href="../assets/css/common_style.css">
    <link rel="stylesheet" href="../assets/css/history.css">
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous"> -->
</head>

<body>

    <header>

        <div class="title">
            <a href="./home.html">NET BLIZ</a>
        </div>

        <div class="full_link">
            <div>
                <a href="./home.html">Home</a>
            </div>

            <div>
                <a href="./fund_transfer.html">Transfer</a>
            </div>

            <div>
                <a href="./balance_enquire.html">Balance</a>
            </div>

            <div>
                <a class="current_page" href="#">History</a>
            </div>

            <div>
                <a href="./pic_chart.html">Chart</a>
            </div>

            <div class="logout">
                <a href="../index.html">Log Out</a>
            </div>

        </div>

    </header>

    <div class="welcome">

        <div class="background">

            <div class="search">
                <img src="../assets/img/5138de707a808fdcb21f8190a417a259.png_wh860-removebg-preview.png" alt="search">

                <label for="search"></label>
                <input type="search" id="search" name="search" placeholder="History here">

            </div>

            <div class="right_filter">

                <div class="filter">

                    <div class="filter_icon">

                        <img src="../assets/img/filter_icon.png" alt="filter_icon">
                        <span>Filter</span>
                    </div>

                    <img src="../assets/img/arrow_icon.png" alt="arrow_icon">

                </div>

                <div class="select_div">

                    <select class="form-select accounts" id="from" required>

                        <option value="">Choose your Ac.No</option>

                    </select>

                    <button id="result_button">check</button>

                    <button id="restart">back</button>

                </div>

            </div>

        </div>

    </div>

    <script src="../assets/js/common_function.js"></script>

    <main>

    </main>

    <script src="../assets/js/history.js"></script>

    <!-- <script src="../assets/js/common_function.js"></script> -->

    <!-- <script>        const signup_array = JSON.parse(localStorage.getItem("array"));

        const email = localStorage.getItem("email");

        const history = JSON.parse(localStorage.getItem("history_table")) ?? [];

        const balance_enquire = JSON.parse(localStorage.getItem("bal_enquire"));

        const account_details = JSON.parse(localStorage.getItem("account_details"));

        let function_image;
        let type;
        let function_amount;
        let icon;
        let id;
        let function_date;
        let function_current_balance;
        let account_number;
        let reciver_name;
        let reciver_account;

        let sender_account;
        let sender_name;
        // **************************************************

        let sender_value;
        let reciver_value;

        let sender_email;
        let reciver_email;

        let account_value;

        let remark
        // ***********************************************

        active_user()
        function active_user() {

            for (let i = 0; i < signup_array.length; i++) {

                if (signup_array[i].email === email) {

                    main()
                }

            }

        }

        function main() {

            for (let j = 0; j < history.length; j++) {

                sender_value = history[j].sender_account;
                reciver_value = history[j].reciver_account;

                sender_email = history[j].sender_email;
                reciver_email = history[j].reciver_email;

                account_search(sender_value, reciver_value, sender_email, reciver_email, j)

            }

        }

        function account_search(j) {

            for (let k = 0; k < account_details.length; k++) {

                account_value = account_details[k].account;

                if (Number(sender_value) === Number(account_value) && sender_email === email) {

                    sender_account = history[j].sender_account;
                    sender_name = history[j].sender_name;

                    reciver_account = history[j].reciver_account;
                    reciver_name = history[j].reciver_name;

                    function_image = "../assets/img/hdfc_icon.png"
                    type = history[j].sender_type
                    function_amount = history[j].send_amount
                    icon = "../assets/img/minus_icon.png"
                    id = "minus";
                    function_date = history[j].date
                    function_current_balance = history[j].sender_balance;
                    account_number = history[j].sender_account;
                    remark = history[j].remarks;

                    create_div(function_image, type, sender_name, reciver_name, sender_account, reciver_account, function_amount, icon, function_date, function_current_balance, remark)

                }

                else if (Number(reciver_value) === Number(account_value) && reciver_email === email) {

                    sender_account = history[j].reciver_account;
                    sender_name = history[j].reciver_name;

                    reciver_account = history[j].reciver_account;
                    reciver_name = history[j].sender_name;

                    function_image = "../assets/img/hdfc_icon.png"
                    type = history[j].reciver_type
                    function_amount = history[j].send_amount
                    icon = "../assets/img/plus_icon.png";
                    id = "plus";
                    function_date = history[j].date
                    function_current_balance = history[j].reciver_balance;
                    account_number = history[j].reciver_account;
                    remark = history[j].remarks;

                    create_div(function_image, type, sender_name, reciver_name, sender_account, reciver_account, function_amount, icon, function_date, function_current_balance, remark)
                }

            }
        }

        function create_div() {

            const main_div = document.querySelector("main")

            const new_container = document.createElement("div");
            new_container.setAttribute("class", "history");
            document.querySelector("main").append(new_container);

            const send = document.createElement("div");
            send.setAttribute("class", "send_data");
            new_container.append(send);

            const type_fund = document.createElement("div");
            type_fund.setAttribute("class", "type_fund");
            send.append(type_fund);

            const image = document.createElement("img");
            image.setAttribute("id", "bank_icon")
            image.setAttribute("src", function_image);
            image.setAttribute("alt", "bank_icon");
            type_fund.append(image);

            const transfer_type = document.createElement("div");
            transfer_type.setAttribute("class", "transfer_type");
            type_fund.append(transfer_type);

            const increase = document.createElement("h2");
            increase.setAttribute("class", "increase");
            increase.setAttribute("id", "increase");
            increase.innerText = type;
            transfer_type.append(increase);

            const sender_name_value = document.createElement("h5");
            sender_name_value.setAttribute("class", "reciver_name");
            sender_name_value.innerText = `${sender_name} ` + `to` + ` ${reciver_name}`;
            transfer_type.append(sender_name_value);

            // let reciver_name_value = document.createElement("span");
            // reciver_name_value.setAttribute("class", "send_account");
            // reciver_name_value.innerHTML = (" " + "to" + " " + reciver_name)
            // sender_name_value.append(reciver_name_value);

            const sender_num = document.createElement("h5");
            sender_num.setAttribute("class", "reciver_num");
            sender_num.innerHTML = sender_account;
            transfer_type.append(sender_num);

            const reciver_num = document.createElement("span");
            reciver_num.setAttribute("class", "send_account");
            reciver_num.innerHTML = (reciver_account)
            transfer_type.append(reciver_num);

            const amount = document.createElement("div");
            amount.setAttribute("class", "amount");
            send.append(amount);

            const minus = document.createElement("h4");
            minus.setAttribute("class", "minus");
            minus.setAttribute("id", id);
            minus.innerText = `₹` + `${function_amount}`;
            amount.append(minus);

            const type_model = document.createElement("img");
            type_model.setAttribute("src", icon);
            type_model.setAttribute("alt", "bank_icon");
            amount.append(type_model);

            const balance_data = document.createElement("div");
            balance_data.setAttribute("class", "balance_data");
            new_container.append(balance_data)

            const date = document.createElement("h3");
            date.setAttribute("class", "date");
            date.setAttribute("id", "date");
            date.innerHTML = function_date;
            balance_data.append(date);

            const balance_span = document.createElement("span");
            balance_span.setAttribute("class", "balance_span");
            balance_span.innerText = "Balance :";
            balance_data.append(balance_span);

            const balance = document.createElement("h3");
            balance.setAttribute("class", "balance_span");
            balance.innerText = `₹` + ` ${function_current_balance}`;
            balance_span.append(balance);

            const remark_sms = document.createElement("h3");
            remark_sms.setAttribute("class", "remark");
            remark_sms.innerHTML = (`Remarks :` + ` ${remark}`)
            new_container.append(remark_sms);

        }

        const search = document.querySelector("#search");

        const histroy_search = document.querySelectorAll(".history");

        search.addEventListener("keyup", (key) => {

            const values = key.target.value.toLowerCase();

            for (let i = 0; i < histroy_search.length; i++) {

                const fund_type = histroy_search[i].querySelector(".increase").innerHTML.toLowerCase();

                const date = histroy_search[i].querySelector(".date").innerHTML.toLowerCase();

                const reciver_name = histroy_search[i].querySelector(".reciver_name").innerHTML.toLowerCase();

                const balance = histroy_search[i].querySelector(".balance_span").innerHTML.toLowerCase();

                const send_money = histroy_search[i].querySelector(".minus").innerHTML.toLowerCase();

                const send_account = histroy_search[i].querySelector(".send_account").innerHTML.toLowerCase();

                const account_number = histroy_search[i].querySelector(".reciver_num").innerHTML.toLowerCase();

                const remarks = histroy_search[i].querySelector(".remark").innerHTML.toLowerCase()

                if ((fund_type.includes(values)) || date.includes(values) || reciver_name.includes(values) || balance.includes(values) || send_money.includes(values) || account_number.includes(values) || remarks.includes(values) || account_number.includes(values) || send_account.includes(values)) {

                    histroy_search[i].style.display = "block";

                }

                else {

                    histroy_search[i].style.display = "none";
                }
            }

        });

        account_add()

        let select_account;

        const filter_div = document.querySelector(".filter");

        filter_div.addEventListener("click", () => {

            const filter = document.querySelector(".filter");

            document.querySelector(".filter").style.display = "none";

            document.querySelector(".select_div").style.display = "block";

        });

        const result_button = document.querySelector("button");

        result_button.addEventListener("click", () => {

            select_account = document.getElementById("from").value.trim();

            if (select_account != "") {

                search_account(histroy_search, select_account);

            }

            else {

                alert("click dropdown account number");
            }

        });

        restart()

        function search_account(histroy_search, select_account) {

            for (let sa = 0; sa < histroy_search.length; sa++) {

                const sender_only = histroy_search[sa].querySelector(".reciver_num").innerHTML

                const recive_only = histroy_search[sa].querySelector(".send_account").innerHTML;

                if (Number(select_account) === Number(sender_only) || Number(select_account) === Number(recive_only)) {

                    histroy_search[sa].style.display = "block";

                }

                else {

                    histroy_search[sa].style.display = "none";

                }

            }

        }
    </script> -->

</body>

</html>