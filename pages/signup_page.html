<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>register Page</title>
    <link rel="stylesheet" href="../assets/css/sign_up.css">
</head>

<body>
    <div class="main">
    </div>

    <script>        // left page is start

        const welcome = document.createElement("div");
        welcome.setAttribute("class", "welcome");
        document.querySelector(".main").append(welcome);    //main 1st child is start

        const image = document.createElement("img");
        image.setAttribute("src", "../assets/img/image_processing20201202-31245-1hyedqz.gif");
        image.setAttribute("alt", "Net Bliz");
        document.querySelector(".welcome").append(image);

        const heading = document.createElement("h1");
        heading.innerText = "welcome!!";
        welcome.append(heading);

        const pickup = document.createElement("h3");
        pickup.innerText = "You are 30 seconds away to experiencing your new Banking World ";
        welcome.append(pickup);

        const a = document.createElement("a");
        a.setAttribute("href", "./login_page.html");
        welcome.append(a);

        const button = document.createElement("button");
        button.setAttribute("class", "welcome_button");
        button.innerText = "Login";
        a.append(button);

        // left half page is end

        //container for button , form , button

        const content_of_singnup = document.createElement("div");
        content_of_singnup.setAttribute("class", "sing_up");
        document.querySelector(".main").append(content_of_singnup);     //main 2st child is start

        const obj = [

            {

                "for": "fname",
                "text": "", //label

                "type": "text",
                "name": "fname",
                "id": "fname",
                "placeholder": "First Name *",
                "keyup": "this.value=this.value.replace(/[^A-z]/g,'');",

                "pattern": "^[a-zA-Z ]{3,50}$",
                "tittle": "Your pattern minium length of 3 characters a_z or A_Z only",
                "aria": "First name",
                "required": "true"

            },

            {

                "for": "lname",
                "text": "",

                "type": "text",
                "name": "lname",
                "id": "lname",
                "placeholder": "Last Name *",
                "keyup": "this.value=this.value.replace(/[^A-z]/g,'');",

                "pattern": "^[a-zA-Z ]{1,50}$",
                "tittle": "Your pattern is minium 1 to 20 character a_z or A_Z only",
                "aria": "Last Name"

            },

            {

                "for": "email",
                "text": "",

                "type": "email",
                "name": "email",
                "id": "email",
                "placeholder": "Email.Id *",
                "tittle": "This is not a email format ",
                "aria": "Email.Id ",
                "pattern": "^[a-zA-Z0-9][a-zA-Z0-9._%+-]*@[a-zA-Z0-9.-]+[a-zA-Z]{2,}$",

            },

            {

                "for": "phone",
                "text": "",

                "type": "tel",
                "name": "phone",
                "id": "phone",
                "placeholder": "Phone number *",
                "keyup": "this.value=this.value.replace(/[^0-9]/g,'');",
                "pattern": "[0-9]{12}",
                "tittle": "Before enter phone number enter your country code  OR Your number should be 12 numbers",
                "aria": "Phone No"
            },

            {

                "for": "new_pass",
                "text": "",

                "type": "password",
                "name": "new_pass",
                "id": "new_pass",
                "placeholder": "Create password *",

                "pattern": "(?=.*)(?=.*[a-z])(?=.*[A-Z]).{8,20}",
                "tittle": "Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters",
                "aria": "Create password "
            },

            {

                "for": "confirm",
                "text": "",

                "type": "password",
                "name": "confirm",
                "id": "confirm",
                "placeholder": "Confirm password *",

                "pattern": "(?=.*)(?=.*[a-z])(?=.*[A-Z]).{8,20}",
                "tittle": "Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters",
                "aria": "Confirm password"
            }

        ]

        // Form is started this point

        const page_name = document.createElement("h1");
        page_name.innerText = ("Register here !!");
        content_of_singnup.append(page_name);

        const form = document.createElement("form");
        content_of_singnup.append(form);

        for (let i = 0; i < obj.length; i++) {

            const label_text = document.createElement("label");
            label_text.setAttribute("for", obj[i].for);
            label_text.innerText = obj[i].text;
            form.append(label_text);

            const input_box = document.createElement("input");
            input_box.setAttribute("type", obj[i].type);
            input_box.setAttribute("name", obj[i].name);

            input_box.setAttribute("id", obj[i].id);
            input_box.setAttribute("placeholder", obj[i].placeholder);
            input_box.setAttribute("title", obj[i].tittle);
            input_box.setAttribute("required","")
            if (obj[i].pattern) {
                input_box.setAttribute("pattern", obj[i].pattern);
            }
            if (obj[i].keyup) {

                input_box.setAttribute("onkeyup",obj[i].keyup)
            }

            form.append(input_box);

        }

        //gender radio over....

        const bottom_button = document.createElement("div");
        bottom_button.setAttribute("class", "btm_btn");
        form.append(bottom_button);

        const next = document.createElement("button");
        next.setAttribute("class", "bottom_button");
        next.innerText = ("Register");
        bottom_button.append(next);

        // Functions Start here*****

        // const form_check = document.querySelector("form");

        // form_check.addEventListener("submit", e => {
        //     e.preventDefault()
        //     signup()

        // });

        // let first_name;
        // let last_name;
        // let email;
        // let phone;
        // let new_pass;
        // let confirm;

        // function signup() {

        //     first_name = document.getElementById("fname").value.trim();
        //     last_name = document.getElementById("lname").value.trim();
        //     email = document.getElementById("email").value.trim();
        //     phone = document.getElementById("phone").value.trim();
        //     new_pass = document.getElementById("new_pass").value.trim();
        //     confirm_pass = document.getElementById("confirm").value.trim();

        //     if (first_name != "" && last_name != "" && email != "" && phone != "" && new_pass != "" && confirm_pass != "") {

        //         if (new_pass != confirm_pass) {

        //             alert("Oops !! password and confirm password doesn't match.");
        //         }

        //         else {
        //             emailcheck(email, phone);
        //         }

        //     }

        //     else {
        //         alert("Recheck your values")
        //     }

        // }

        // function emailcheck(email, phone) {

        //     console.log(email)

        //     fetch(`https://api.apilayer.com/email_verification/${email}?apikey=AQcZ7IxCjhBK10lW9u8Lx03MH378Kaci`)

        //         .then((response) => response.json())

        //         .then((data) => {

        //             if (data.can_connect_smtp == true) {

        //                 console.log(data);
        //                 phone_check(email, phone);
        //             }

        //             else {
        //                 alert("User email id is not valid");
        //             }

        //         });
        // }

        // function phone_check(email, phone) {

        //     fetch(`https://api.apilayer.com/number_verification/validate?apikey=AQcZ7IxCjhBK10lW9u8Lx03MH378Kaci&number=${phone}`)

        //         .then((response) => response.json())

        //         .then((data) => {

        //             if (data.carrier != "" && phone != "") {
        //                 console.log("valid");
        //                 add_local(email, phone);

        //             }
        //             else {
        //                 alert("Recheck your phone number");
        //             }
        //         });
        // }

        // function add_local(email, phone) {

        //     const store = JSON.parse(localStorage.getItem("array")) ?? []; //store = []

        //     let res;

        //     for (let i = 0; i < store.length; i++) {

        //         if (store[i].email === email) {
        //             res = 1;
        //             break;
        //         }
        //     }

        //     if (res == 1) {
        //         alert("email already registered");

        //     }

        //     else {
        //         const obj = {};

        //         obj.fname = first_name
        //         obj.lname = last_name
        //         obj.email = email
        //         obj.phone = Number(phone)
        //         obj.confirm = confirm_pass
        //         obj.dob = ""
        //         obj.state = ""
        //         obj.district = ""
        //         obj.pincode = ""
        //         obj.image = ""
        //         obj.primary = ""

        //         store.push(obj);//[{name, email, pass}]

        //         localStorage.setItem("array", JSON.stringify(store)); // array :  [{name, email, pass}]

        //         alert("successfully signup");

        //         window.location.href = "./login_page.html"

        //     }
        // }
    </script>

    <script src="../assets/js/sign_up.js"></script>

</body>

</html>